{"version":3,"file":"content.js","mappings":"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","sources":["webpack://goldenthinkerextractor/./src/content.js"],"sourcesContent":["// CORS: 'sha256-3woF8BZ54TeXM+czaH3aXoaJsVpiamuAKFsXDykAR/Q='\r\n\r\nfunction attach_event_listeners(){\r\n  // Save selectors to cookies\r\n  console.log(\"Attaching event listener to start/stopScript button\");\r\n\r\n  document.getElementById(\"startButton\").addEventListener(\"click\", function() {\r\n    const button = this;\r\n    chrome.tabs.query({ active: true, currentWindow: true }, function(tabs) {\r\n        const activeTab = tabs[0];\r\n        console.log(\"Sending 'startScript' message to background script\");\r\n        chrome.runtime.sendMessage({ action: \"startScript\", tab: activeTab }, function(response) {\r\n            if (chrome.runtime.lastError) {\r\n                console.error(\"Error sending message:\", chrome.runtime.lastError.message);\r\n                return;\r\n            }\r\n            if (response.status === \"success\") {\r\n                console.log(\"Script injection worked.\");\r\n                button.innerHTML = \"Stop\";\r\n                // Handle UI changes or further actions\r\n            } else if (response.status === \"error\") {\r\n                console.error(\"Script failed to inject:\", response.message);\r\n                // Handle error\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n  document.getElementById(\"downloadButton\").addEventListener(\"click\", function() {\r\n      console.log(\"downloading...\");\r\n      const filenameInput = document.getElementById(\"filename\");\r\n      const filename = filenameInput.value.trim() || \"download\"; // Use a default filename if none is provided\r\n\r\n      chrome.storage.local.get([\"globalResultsArray\"], function(data) {\r\n          if (data.globalResultsArray) {\r\n              const jsonString = JSON.stringify(data.globalResultsArray, null, 2);\r\n              const blob = new Blob([jsonString], { type: \"application/json\" });\r\n              const url = URL.createObjectURL(blob);\r\n\r\n              const a = document.createElement(\"a\");\r\n              a.href = url;\r\n              a.download = `${filename}.json`; // Use the user-specified filename\r\n              document.body.appendChild(a);\r\n              a.click();\r\n\r\n              document.body.removeChild(a);\r\n              URL.revokeObjectURL(url);\r\n          } else {\r\n              console.log(\"No data to download.\");\r\n          }\r\n      });\r\n  });\r\n\r\n  // Clear selectors from cookies and text area\r\n  document.getElementById(\"clearButton\").addEventListener(\"click\", function() {\r\n    console.log(\"clear\");\r\n    chrome.storage.local.clear(function() {\r\n      var error = chrome.runtime.lastError;\r\n      if (error) {\r\n          console.error(error);\r\n      } else {\r\n          console.log('Data cleared from chrome.storage.local');\r\n      }\r\n    });\r\n  });\r\n\r\n  document.getElementById(\"addElementButton\").addEventListener(\"click\", function() {\r\n    const nameInput = document.getElementById(\"elementName\");\r\n    const selectorInput = document.getElementById(\"elementSelector\");\r\n    const name = nameInput.value.trim();\r\n    const selector = selectorInput.value.trim();\r\n\r\n    if (name && selector) {\r\n        chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n            const currentTabId = tabs[0].id.toString(); // Convert tab ID to string for use as a key\r\n            const newElement = {name, selector};\r\n\r\n            // Retrieve the current list of selectors for the tab, add the new one, and save it back\r\n            chrome.storage.local.get([currentTabId], function(result) {\r\n                const currentSelectors = result[currentTabId] ? result[currentTabId] : [];\r\n                currentSelectors.push(newElement);\r\n                let storageObject = {};\r\n                storageObject[currentTabId] = currentSelectors;\r\n\r\n                chrome.storage.local.set(storageObject, function() {\r\n                    console.log('Selector saved for tab ID:', currentTabId);\r\n                    // Clear inputs and refresh the list of selectors\r\n                    nameInput.value = '';\r\n                    selectorInput.value = '';\r\n                    loadSelectorsForCurrentTab();\r\n                });\r\n            });\r\n        });\r\n    } else {\r\n        alert(\"Please fill in both name and selector fields.\");\r\n    }\r\n  });\r\n\r\n\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  console.log(\"DOMContentLoaded\");\r\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n    const url = new URL(tabs[0].url);\r\n    const domain = url.hostname;\r\n    document.getElementById(\"domainName\").textContent = domain;\r\n  });\r\n  attach_event_listeners();\r\n  loadSelectorsForCurrentTab(); // Load selectors for the current tab\r\n\r\n  var tablinks = document.getElementsByClassName(\"tablinks\");\r\n  for (let i = 0; i < tablinks.length; i++) {\r\n      tablinks[i].addEventListener('click', function(event) {\r\n          var tabName = this.getAttribute('data-tab');\r\n          openTab(event,tabName);\r\n      });\r\n\r\n      // Automatically open the first tab or a specific tab\r\n      if(tablinks.length > 0) {\r\n        tablinks[0].click();\r\n      }\r\n    }\r\n\r\n    \r\n\r\n    function getFaviconUrl(url) {\r\n      // Assuming favicon is at the root directory as a fallback\r\n      let faviconUrl = `${url.protocol}//${url.hostname}/favicon.ico`;\r\n    \r\n      // Attempt to fetch the favicon specified in the page's link element\r\n      function findFaviconInDocument() {\r\n        const link = document.querySelector(\"link[rel~='icon']\");\r\n        if (link) {\r\n          return link.href;\r\n        }\r\n        return '';\r\n      }\r\n\r\n      chrome.scripting.executeScript({\r\n        target: {tabId: url.id},\r\n        function: findFaviconInDocument,\r\n      }, (injectionResults) => {\r\n        for (const frameResult of injectionResults)\r\n          if (frameResult.result && frameResult.result !== '') {\r\n            faviconUrl = frameResult.result;\r\n            break;\r\n          }\r\n        document.getElementById('target_favicon').src = faviconUrl;\r\n      });\r\n    \r\n      return faviconUrl; // This will return the default favicon path or the updated one if found\r\n    }\r\n\r\n    \r\n    // Fetch and display the favicon and domain\r\n    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const url = new URL(tabs[0].url);\r\n      document.getElementById(\"domainName\").textContent = url.hostname;\r\n      document.getElementById('target_favicon').src = `${url.protocol}//${url.host}/favicon.ico`;\r\n    });\r\n\r\n});\r\n\r\nfunction loadSelectorsForCurrentTab() {\r\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const currentTabId = tabs[0].id.toString();\r\n      chrome.storage.local.get([currentTabId], function(result) {\r\n          const selectors = result[currentTabId] ? result[currentTabId] : [];\r\n          const elementsList = document.getElementById(\"elementsList\");\r\n          elementsList.innerHTML = ''; // Clear existing list\r\n\r\n          selectors.forEach((element, index) => {\r\n              const elementItem = document.createElement(\"div\");\r\n              elementItem.className = \"element-item\";\r\n              elementItem.innerHTML = `<td>${element.name}: ${element.selector}</td><td></td><td></td><td><button class=\"removeElementButton\" data-index=\"${index}\">X</button></td>`;\r\n              elementsList.appendChild(elementItem);\r\n\r\n              // Add remove functionality\r\n              elementItem.querySelector(\".removeElementButton\").addEventListener(\"click\", function() {\r\n                  removeSelectorFromCurrentTab(index);\r\n              });\r\n          });\r\n      });\r\n  });\r\n}\r\n\r\n\r\nfunction removeSelectorFromCurrentTab(index) {\r\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const currentTabId = tabs[0].id.toString();\r\n      chrome.storage.local.get([currentTabId], function(result) {\r\n          let selectors = result[currentTabId];\r\n          if (selectors) {\r\n              selectors.splice(index, 1); // Remove the selector at the specified index\r\n              let storageObject = {};\r\n              storageObject[currentTabId] = selectors;\r\n\r\n              chrome.storage.local.set(storageObject, function() {\r\n                  console.log('Selector removed for tab ID:', currentTabId);\r\n                  loadSelectorsForCurrentTab(); // Refresh the list of selectors\r\n              });\r\n          }\r\n      });\r\n  });\r\n}\r\n\r\n\r\nfunction openTab(evt, tabName) {\r\n  var i,tabcontent, tablinks;\r\n  tabcontent = document.getElementsByClassName(\"tabcontent\");\r\n  for (i = 0; i < tabcontent.length; i++) {\r\n    tabcontent[i].style.display = \"none\";\r\n  }\r\n  tablinks = document.getElementsByClassName(\"tablinks\");\r\n  for (i = 0; i < tablinks.length; i++) {\r\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\r\n  }\r\n  var targetTab = document.getElementById(tabName);\r\n  if (targetTab) {\r\n    targetTab.style.display = \"block\";\r\n    evt.currentTarget.className += \" active\";\r\n  } else {\r\n    console.error(\"Tab not found: \", tabName);\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":["attach_event_listeners","console","log","document","getElementById","addEventListener","button","chrome","tabs","query","active","currentWindow","activeTab","runtime","sendMessage","action","tab","response","lastError","error","message","status","innerHTML","filenameInput","filename","value","trim","storage","local","get","data","globalResultsArray","jsonString","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","a","createElement","href","download","concat","body","appendChild","click","removeChild","revokeObjectURL","clear","nameInput","selectorInput","name","selector","currentTabId","id","toString","newElement","result","currentSelectors","push","storageObject","set","loadSelectorsForCurrentTab","alert","domain","hostname","textContent","tablinks","getElementsByClassName","i","length","event","tabName","getAttribute","openTab","getFaviconUrl","faviconUrl","protocol","findFaviconInDocument","link","querySelector","scripting","executeScript","target","tabId","injectionResults","_iterator","_createForOfIteratorHelper","_step","s","n","done","frameResult","err","e","f","src","host","selectors","elementsList","forEach","element","index","elementItem","className","removeSelectorFromCurrentTab","splice","evt","tabcontent","style","display","replace","targetTab","currentTarget"],"sourceRoot":""}