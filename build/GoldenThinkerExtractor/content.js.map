{"version":3,"file":"content.js","mappings":"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","sources":["webpack://goldenthinkerextractor/./src/content.js"],"sourcesContent":["// CORS: 'sha256-3woF8BZ54TeXM+czaH3aXoaJsVpiamuAKFsXDykAR/Q='\r\n\r\nfunction attach_event_listeners(){\r\n  // Save selectors to cookies\r\n  console.log(\"Attaching event listener to start/stopScript button\");\r\n\r\n  document.getElementById(\"startButton\").addEventListener(\"click\", function() {\r\n    const button = this;\r\n    chrome.tabs.query({ active: true, currentWindow: true }, function(tabs) {\r\n        const activeTab = tabs[0];\r\n        console.log(\"Sending 'startScript' message to background script\");\r\n        chrome.runtime.sendMessage({ action: \"startScript\", tabId: activeTab.id }, function(response) {\r\n            if (chrome.runtime.lastError) {\r\n                console.error(\"Error sending message:\", chrome.runtime.lastError.message);\r\n                return;\r\n            }\r\n            if (response.status === \"success\") {\r\n                console.log(\"Script injection worked.\");\r\n                button.innerHTML = \"Stop\";\r\n                // Handle UI changes or further actions\r\n            } else if (response.status === \"error\") {\r\n                console.error(\"Script failed to inject:\", response.message);\r\n                // Handle error\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n  document.getElementById(\"downloadButton\").addEventListener(\"click\", function() {\r\n      console.log(\"downloading...\");\r\n      const filenameInput = document.getElementById(\"filename\");\r\n      const filename = filenameInput.value.trim() || \"download\"; // Use a default filename if none is provided\r\n\r\n      chrome.storage.local.get([\"globalResultsArray\"], function(data) {\r\n          if (data.globalResultsArray) {\r\n              const jsonString = JSON.stringify(data.globalResultsArray, null, 2);\r\n              const blob = new Blob([jsonString], { type: \"application/json\" });\r\n              const url = URL.createObjectURL(blob);\r\n\r\n              const a = document.createElement(\"a\");\r\n              a.href = url;\r\n              a.download = `${filename}.json`; // Use the user-specified filename\r\n              document.body.appendChild(a);\r\n              a.click();\r\n\r\n              document.body.removeChild(a);\r\n              URL.revokeObjectURL(url);\r\n          } else {\r\n              console.log(\"No data to download.\");\r\n          }\r\n      });\r\n  });\r\n\r\n  // Clear selectors from cookies and text area\r\n  document.getElementById(\"clearButton\").addEventListener(\"click\", function() {\r\n    console.log(\"clear\");\r\n    chrome.storage.local.clear(function() {\r\n      var error = chrome.runtime.lastError;\r\n      if (error) {\r\n          console.error(error);\r\n      } else {\r\n          console.log('Data cleared from chrome.storage.local');\r\n      }\r\n    });\r\n  });\r\n\r\n  document.getElementById(\"addElementButton\").addEventListener(\"click\", function() {\r\n    const nameInput = document.getElementById(\"elementName\");\r\n    const selectorInput = document.getElementById(\"elementSelector\");\r\n    const name = nameInput.value.trim();\r\n    const selector = selectorInput.value.trim();\r\n\r\n    if (name && selector) {\r\n        chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n            const currentTabId = tabs[0].id.toString(); // Convert tab ID to string for use as a key\r\n            const newElement = {name, selector};\r\n\r\n            // Retrieve the current list of selectors for the tab, add the new one, and save it back\r\n            chrome.storage.local.get([currentTabId], function(result) {\r\n                const currentSelectors = result[currentTabId] ? result[currentTabId] : [];\r\n                currentSelectors.push(newElement);\r\n                let storageObject = {};\r\n                storageObject[currentTabId] = currentSelectors;\r\n\r\n                chrome.storage.local.set(storageObject, function() {\r\n                    console.log('Selector saved for tab ID:', currentTabId);\r\n                    // Clear inputs and refresh the list of selectors\r\n                    nameInput.value = '';\r\n                    selectorInput.value = '';\r\n                    loadSelectorsForCurrentTab();\r\n                });\r\n            });\r\n        });\r\n    } else {\r\n        alert(\"Please fill in both name and selector fields.\");\r\n    }\r\n  });\r\n\r\n\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  console.log(\"DOMContentLoaded\");\r\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n    const url = new URL(tabs[0].url);\r\n    const domain = url.hostname;\r\n    document.getElementById(\"domainName\").textContent = domain;\r\n  });\r\n  attach_event_listeners();\r\n  loadSelectorsForCurrentTab(); // Load selectors for the current tab\r\n\r\n  var tablinks = document.getElementsByClassName(\"tablinks\");\r\n  for (let i = 0; i < tablinks.length; i++) {\r\n      tablinks[i].addEventListener('click', function(event) {\r\n          var tabName = this.getAttribute('data-tab');\r\n          openTab(event,tabName);\r\n      });\r\n\r\n      // Automatically open the first tab or a specific tab\r\n      if(tablinks.length > 0) {\r\n        tablinks[0].click();\r\n      }\r\n    }\r\n\r\n    \r\n\r\n    function getFaviconUrl(url) {\r\n      // Assuming favicon is at the root directory as a fallback\r\n      let faviconUrl = `${url.protocol}//${url.hostname}/favicon.ico`;\r\n    \r\n      // Attempt to fetch the favicon specified in the page's link element\r\n      function findFaviconInDocument() {\r\n        const link = document.querySelector(\"link[rel~='icon']\");\r\n        if (link) {\r\n          return link.href;\r\n        }\r\n        return '';\r\n      }\r\n\r\n      chrome.scripting.executeScript({\r\n        target: {tabId: url.id},\r\n        function: findFaviconInDocument,\r\n      }, (injectionResults) => {\r\n        for (const frameResult of injectionResults)\r\n          if (frameResult.result && frameResult.result !== '') {\r\n            faviconUrl = frameResult.result;\r\n            break;\r\n          }\r\n        document.getElementById('target_favicon').src = faviconUrl;\r\n      });\r\n    \r\n      return faviconUrl; // This will return the default favicon path or the updated one if found\r\n    }\r\n\r\n    \r\n    // Fetch and display the favicon and domain\r\n    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const url = new URL(tabs[0].url);\r\n      document.getElementById(\"domainName\").textContent = url.hostname;\r\n      document.getElementById('target_favicon').src = `${url.protocol}//${url.host}/favicon.ico`;\r\n    });\r\n\r\n});\r\n\r\nfunction loadSelectorsForCurrentTab() {\r\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const currentTabId = tabs[0].id.toString();\r\n      chrome.storage.local.get([currentTabId], function(result) {\r\n          const selectors = result[currentTabId] ? result[currentTabId] : [];\r\n          const elementsList = document.getElementById(\"elementsList\");\r\n          elementsList.innerHTML = ''; // Clear existing list\r\n\r\n          selectors.forEach((element, index) => {\r\n              const elementItem = document.createElement(\"div\");\r\n              elementItem.className = \"element-item\";\r\n              elementItem.innerHTML = `<td>${element.name}: ${element.selector}</td><td></td><td></td><td><button class=\"removeElementButton\" data-index=\"${index}\">X</button></td>`;\r\n              elementsList.appendChild(elementItem);\r\n\r\n              // Add remove functionality\r\n              elementItem.querySelector(\".removeElementButton\").addEventListener(\"click\", function() {\r\n                  removeSelectorFromCurrentTab(index);\r\n              });\r\n          });\r\n      });\r\n  });\r\n}\r\n\r\n\r\nfunction removeSelectorFromCurrentTab(index) {\r\n  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      const currentTabId = tabs[0].id.toString();\r\n      chrome.storage.local.get([currentTabId], function(result) {\r\n          let selectors = result[currentTabId];\r\n          if (selectors) {\r\n              selectors.splice(index, 1); // Remove the selector at the specified index\r\n              let storageObject = {};\r\n              storageObject[currentTabId] = selectors;\r\n\r\n              chrome.storage.local.set(storageObject, function() {\r\n                  console.log('Selector removed for tab ID:', currentTabId);\r\n                  loadSelectorsForCurrentTab(); // Refresh the list of selectors\r\n              });\r\n          }\r\n      });\r\n  });\r\n}\r\n\r\n\r\nfunction openTab(evt, tabName) {\r\n  var i,tabcontent, tablinks;\r\n  tabcontent = document.getElementsByClassName(\"tabcontent\");\r\n  for (i = 0; i < tabcontent.length; i++) {\r\n    tabcontent[i].style.display = \"none\";\r\n  }\r\n  tablinks = document.getElementsByClassName(\"tablinks\");\r\n  for (i = 0; i < tablinks.length; i++) {\r\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\r\n  }\r\n  var targetTab = document.getElementById(tabName);\r\n  if (targetTab) {\r\n    targetTab.style.display = \"block\";\r\n    evt.currentTarget.className += \" active\";\r\n  } else {\r\n    console.error(\"Tab not found: \", tabName);\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":["attach_event_listeners","console","log","document","getElementById","addEventListener","button","chrome","tabs","query","active","currentWindow","activeTab","runtime","sendMessage","action","tabId","id","response","lastError","error","message","status","innerHTML","filenameInput","filename","value","trim","storage","local","get","data","globalResultsArray","jsonString","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","a","createElement","href","download","concat","body","appendChild","click","removeChild","revokeObjectURL","clear","nameInput","selectorInput","name","selector","currentTabId","toString","newElement","result","currentSelectors","push","storageObject","set","loadSelectorsForCurrentTab","alert","domain","hostname","textContent","tablinks","getElementsByClassName","i","length","event","tabName","getAttribute","openTab","getFaviconUrl","faviconUrl","protocol","findFaviconInDocument","link","querySelector","scripting","executeScript","target","injectionResults","_iterator","_createForOfIteratorHelper","_step","s","n","done","frameResult","err","e","f","src","host","selectors","elementsList","forEach","element","index","elementItem","className","removeSelectorFromCurrentTab","splice","evt","tabcontent","style","display","replace","targetTab","currentTarget"],"sourceRoot":""}